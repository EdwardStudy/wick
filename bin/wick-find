#!/bin/bash

# Find a file in the parent chain.  Finds the lowest descendant that contains
# the file.
#
# Parameters:
#     $1: Variable name to store the result
#     $2: Name of file to find
# Returns true when file is found successfully.
wick-find() {
    local BASE

    BASE="."

    while [[ ! -e "$BASE/$2" ]] && [[ -d "$BASE/parent/" ]]; do
        BASE="$BASE/parent"
    done

    if [[ -e "$BASE/$2" ]]; then
        local "$1" && wick-indirect "$1" "$BASE/$2" && return 0
    fi

    return 1
}
