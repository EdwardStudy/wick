#!/usr/bin/env bash
# Installs a configuration file and reloads Apache.  See `wickMakeFile` in
# [wick-base](../wick-base) for information regarding paths and further
# options.
#
# $1 - Name of file contained in the formula to add as a configuration file
#      for Apache.
# $@ - All other options pass directly to `wickMakeFile`.
#
# Returns nothing.
apache2AddConf() {
    local CONF OPTIONS OS

    wickGetArgument CONF 0 "$@"
    wickGetOptions OPTIONS "$@"
    wickInfo "Adding Apache2 config: ${OPTIONS[@]-} $CONF"
    wickExplorer OS wick-base os

    case "$OS" in
        redhat|centos)
            wickMakeFile "${OPTIONS[@]-}" /etc/httpd/conf.d/
            wickService reload httpd
            ;;

        *)
            wickMakeFile "${OPTIONS[@]-}" /etc/apache2/conf-available
            a2enconf "$CONF"
            wickService reload apache2
            ;;
    esac
}
