#!/usr/bin/env bash
# Installs a virtual host and reloads Apache.  See `wickMakeFile` in
# [wick-base](../wick-base) for information regarding paths and further
# options.
#
# $1 - Name of file contained in the formula to add as a virtual host for
#      Apache.
# $@ - All other options pass directly to `wickMakeFile`.
#
# Returns nothing.
apache2AddVhost() {
    local OPTIONS OS SITE

    wickGetArgument SITE 0 "$@"
    wickGetOptions OPTIONS "$@"
    wickInfo "Adding Apache2 vhost: ${OPTIONS[@]-} $SITE"
    wickExplorer OS wick-base os

    case "$OS" in
        redhat|centos)
            wickMakeFile "${OPTIONS[@]-}" /etc/httpd/conf.d/
            wickService reload httpd
            ;;

        *)
            wickMakeFile "${OPTIONS[@]-}" /etc/apache2/sites-available
            a2ensite "$SITE"
            wickService reload apache2
            ;;
    esac
}
