#!/bin/bash

wick-get-iface-ip() {
    local IP LIST OLD_IFS

    if [[ "$2" == '*' ]]; then
        LIST=()
        OLD_IFS=$IFS
        IFS=$'\n'

        for IP in $(ifconfig -v 2>/dev/null | grep inet\ || echo ""); do
            IP=${IP#*inet addr:}
            IP=${IP#*inet }
            IP=${IP%% *}
            LIST=("${LIST[@]}" "$IP")
        done

        IFS=$OLD_IFS

        local "$1" && wick-indirect-array "$1" "${LIST[@]}"
        return 0
    fi

    IP=$(ifconfig -v $2 2>/dev/null | grep inet\ | head -n 1 || echo "")
    IP=${IP#*inet addr:}
    IP=${IP#*inet }
    IP=${IP%% *}

    if [[ -z "$IP" ]]; then
        return 1
    fi

    local "$1" && wick-indirect "$1" "$IP"
}

