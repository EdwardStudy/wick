#!/bin/bash
#
# Writes a warning to the logging system.
#
# This message always is written to stdout as well.
#
# Parameters:
#     $@: The log messages to write (they get joined into one line)
#
# Environment variables:
#     WICK_COLOR: When set to non-empty string, ANSI color is enabled.
wick-warn() (
    set +x
    local CONTENT OUTPUT

    wick-array-join CONTENT " " "$@"
    wick-log "WARN" "$CONTENT"
    wick-prefix-lines OUTPUT "WARN: " "$CONTENT"

    if [[ ! -z "${WICK_COLOR-}" ]]; then
        OUTPUT=$'\E[33;1m'"$OUTPUT"$'\E[0m'
    fi

    echo "$OUTPUT"
)
